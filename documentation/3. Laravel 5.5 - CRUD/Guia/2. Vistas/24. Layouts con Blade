24. Layouts con Blade

Notas
=====

A medida que nuestro proyecto crece nuestras plantillas se vuelven más complejas y es inevitable encontrarnos con que estamos repitiendo etiquetas y estructuras que podríamos compartir entre multiples vistas. Es por ello que en esta seccion 24 le enseñaremos a integrar cualquier diseño usando Laravel Blade; para que de esta manera pueda sacarle provecho a las diferentes directivas que ofrece este motor de plantillas y evitar así la repetición de código HTML, además de mantener sus vistas sencillas, expresivas, elegantes y bien estructuradas.


Cuando se trabaja con Laravel puede utilizar Bootstrap, Materialize, Bulma o cualquier framework de CSS o diseño personalizado que quiera.

Directiva @include
------------------

Blade incluye una directiva llamada @include. Para usarla solamente tenemos que pasarle el nombre del archivo que queremos incluir:
---	
	@include('header')
	    <h1>{{ $title }}</h1>
	    ...
	@include('footer')
---

Podemos usar múltiples directivas @include dentro de una misma plantilla de Blade.



Helper asset()
--------------

El helper asset nos dará la ruta absoluta al archivo indicado:
---	
	<link href="{{ asset('css/style.css') }}" rel="stylesheet">
---
Utilizando este helper podemos evitar que la ruta del archivo cambie dependiendo de la URL.



Layout principal
----------------

En lugar de separar nuestra plantilla en diferentes archivos, podemos crear una sola plantilla que tendrá toda la estructura de nuestro diseño. Podemos llamar a esta plantilla layout.blade.php, por ejemplo, y colocar todo el código de nuestro diseño allí.

Utilizando la directiva @yield dentro de esta plantilla podemos indicar secciones (pasando como argumento el nombre de la sección) y luego en plantillas individuales podemos colocar el contenido de dichas secciones:
---
	<main role="main" class="container">
	    @yield('content')
	</main>
---


Puede nombrar su layout de cualquier forma, siempre y cuando coloque la extensión .blade.php. En este ejemplo se llama layout.blade.php.

Puede agregar tantas directivas @yield como quiera a su layout. Por ejemplo, puede agregar una directiva yield para personalizar el título de la página:
---
	<title>@yield('title') - Klvst3r.io</title>
---


Extender de una plantilla
-------------------------

En cada una de nuestras plantillas individuales en lugar de incluir el header o footer le indicamos a Laravel que la vista debe extender de layout.blade.php. No es necesario colocar la extensión del archivo. Tampoco es necesario colocar la ruta completa, ya que Laravel por defecto buscará el archivo dentro del directorio resources/views:
---
	@extends('layout')
---


Hecho esto, debemos definir las secciones. Para ello utilizamos la directiva @section, pasando como argumento el nombre de la sección:
---
	@section('title') Usuario {{ $id }} @endsection
	@section('content')
	    <!-- Contenido de la sección -->
	@endsection
---



Indicamos el final o cierre de la sección con la directiva @endsection.




"La directiva @section define una sección de contenido, mientras que la directiva @yield es usada para mostrar el contenido de una sección específica."

Dado que el titulo es una sola línea, podemos pasar el contenido como el segundo argumento de @section:
---
	@section('title', "Usuario {$id}")
---


El código que se encuentra entre comillas es PHP y no Blade, por lo que en lugar de utilizar la sintaxis de dobles llaves {{ $id }} utilizaremos {$id} o simplemente $id.


Practica
========

En esta sección vamos a ver como integrar un diseño con Laravel Blade evitando la repetición de codigo en nuestras vistas. Para inregrar un diseño en nuestra aplicación necesitasmo un diseño, como no vamos a crear uno vamos a utilizar uno ya hecho desde la página de Bootstrap.

	https://getbootstrap.com/

Ahora, cuando se trabaje con Laravel se puede utilizar Bootstrap, Materialize, Bulma o cualquier framework de CSS que se quiera, o si se quiere a un Front-end developer en el equipo, se puede trabajar en la creación de un diseño personalizado, esto es irrelevante por que sin importar el Framework o el HTMl qu ese tenga, se puede integrar con Blade.

Vamos a copiar un ejemplo de la página de Bootstrap, un ejemplo que tenga tanto header como footer; Seleccionando el tema "Sticky footer w/navbar"

Desde:
	https://getbootstrap.com/docs/5.1/examples/sticky-footer-navbar/

Posteroir a ello, 
- click derecho
- Ver codigo fuente
- copiar codigo fuente del ejemplo.

Pero antes de intentar intregrar este ejemplo con Laravel, vamos a copiarlo simplemente dentro del directorio publico del proyecto.

Podemos incluso crear un proyectro aparte para hacer esto, puede ser separado de Laravel, asi podemos dividir esta tarea en dos pasos, hacer que el ejemplo funcione y luego integrarlo con Laravel.

Vamos a llmar el ejemplo "boostrap.html". Copiamos ahora si el codigo fuente. Aunque podemos ver que este ejemplo esta haciendo referencia a los archivos de JS que tienen una hubicación relativa al ejemplo.

Lo guardamos en 
	/public/bootstrap.html


Vamos a ver si podemos desde la pagina de bootstrap utilizar el CDN, para no necesitar copiar todos estos archivos, vamos a la parte de la documentación, donde podemos ver las etiquetas que uiliza el CDN.

En la parte de la documentación:
	https://getbootstrap.com/docs/5.1/getting-started/introduction/

donde podemos ver la etiquetas que utilizan el CDN, copiamos para ver el codigo CSS, y hay otro codigo CSS que lo copiaremos del propio proyecto.
---
    <!-- Bootstrap core CSS -->
	<link href="css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

	<!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous"> -->
---


Se hace lo mismo de referenciar los archivos CDN para la parte de JS
---	
	  <script src="/docs/5.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->		
---


Para poder visualizar el resultado lo hacemos desde raiz y el nombre de la pagina de ejemplo.
	http://127.0.0.1:8000/bootstrap.html	

Por algun motivo en esta versión no se utiliza jQuery, pero la funcionalidad es a traves de JS.


Integración del diseño en el proyecto de Laravel
-------------------------------------------------

El diseño se puede considerar de dos partes, la parte del header, y luego la parte del footer, en medio esta la parte del contenido. Seleccionando la parte del header copiando en la caprte views, se crearia un archivo ej. header.blade.php.

Lo mismo con el contenido, para la parte del contenido dentro de la etiqueta main y la parte del footer. La tercera parte es el cierre con el footer.

Dentro de la carpeta de vista se tendras las areas
- header.blade.php
- content.blade.php
- footer.blade.php







Ejercicio
=========

Cree un archivo menu.blade.php e incluyalo en el header del layout principal. Dentro del archivo menu, cree un menú con enlaces a las diferentes rutas de la aplicación. Asegúrese de ejecutar las pruebas para verificar que todo siga funcionando correctamente.


Documentación y ejemplos con Bootstrap
---------------------------------------
	https://getbootstrap.com/

	

Ayuda
=====

¿Qué debo usar para incluir el menu.blade.php? ¿@yield y @section? ¿Solo @section y @show? y nada de eso me da resultado. 

Lo podemos hacer de diferentes formas y nada. Posterior a una investigación y localizar la directiva @include dentro del layout principal. El @include en el layout principal, buscar una vista dentro del directorio view, de tal forma que solo debe invocarse como @include('menu). A lo anterior le llaman "Including Sub-Views".

En mi caso hice enlaces hacia "usuarios", y hacia "usuarios/5", y aquí es importante no pasar por alto el uso de:
	{{ asset('usuarios') }}
y
	{{ asset('usuarios/5') }}

Para que los enlaces funcionen de manera correcta, independientemente de la profundidad de la url.

layout.blade.php
+++
<header>
	<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
		<a class="navbar-brand" href="{{ asset('/') }}"> Fixed navbar </a>
-----
	[ href="{{ asset('/') }}"> ]




